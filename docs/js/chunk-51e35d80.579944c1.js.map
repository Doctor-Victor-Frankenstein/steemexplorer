{"version":3,"sources":["webpack:///./src/views/ProposalPage.vue?fab4","webpack:///./src/views/ProposalPage.vue?3c67","webpack:///src/views/ProposalPage.vue","webpack:///./src/views/ProposalPage.vue?c7a1","webpack:///./src/views/ProposalPage.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ProposalPage_vue_vue_type_style_index_0_id_7d5ad6e1_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ProposalPage_vue_vue_type_style_index_0_id_7d5ad6e1_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","ref","on","login","onLogin","logout","onLogout","staticClass","_v","_s","proposal","subject","style","backgroundImage","image","creator","image_receiver","receiver","attrs","to","url","start_date","end_date","total_time","daily_pay","total_pay","status","status_extended","votes_sp","$store","state","auth","disabled","saving","click","vote","_e","display_button","alert","role","infoText","domProps","innerHTML","successText","dangerText","votes","length","directives","name","rawName","value","expression","change","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","sort_order","multiple","_l","index","key","voter","votes_description","staticRenderFns","ProposalPagevue_type_script_lang_js_","data","components","HeaderEFTG","mixins","ChainProperties","SteemClient","Alerts","created","_this","getChainProperties","then","getProposal","watch","new_order","sortBy","methods","_getProposal","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","id","proposals","delta_t","wrap","_context","prev","next","$route","params","steem_database_call","sent","console","log","showDanger","concat","Error","Date","config","EXPLORER","permlink","witnessVotes2sp","total_votes","newVote","utils","textTime","parseFloat","toFixed","SBD","active","isActive","now","logged","loadVotesFromAccount","loadVotes","stop","apply","arguments","type","sort","a","b","parseInt","localeCompare","_loadVotes","_callee2","from","break_while","voters","j","accounts","account","_context2","push","abrupt","calculate_vote","witness_vote_weight","proxy","no_proxy_vote_weight","proxy_vote_weight","Math","floor","vesting_shares","total","i","proxied_vsf_votes","no_proxy_votes","proxy_votes","_loadVotesFromAccount","_callee3","user","account_votes","_context3","clearVotes","activeKey","keys","ownerKey","owner","privKey","ops","proposal_ids","approve","extensions","hideSuccess","hideDanger","hideInfo","self","steem_broadcast_sendOperations","result","showSuccess","EXPLORER2","block_num","catch","error","message","views_ProposalPagevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAweE,EAAG,qECA3e,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,cAAkCE,IAAA,aAAAC,GAAA,CAAqBC,MAAAR,EAAAS,QAAAC,OAAAV,EAAAW,YAA2CP,EAAA,OAAYQ,YAAA,aAAwB,CAAAR,EAAA,MAAAJ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAC,YAAAZ,EAAA,OAA4DQ,YAAA,iBAA4B,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,aAAAT,EAAA,OAAgCQ,YAAA,UAAqB,CAAAR,EAAA,OAAYQ,YAAA,qBAAAK,MAAA,CAAyCC,gBAAA,OAAAlB,EAAAe,SAAAI,MAAA,OAAuDf,EAAA,QAAAJ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAK,gBAAAhB,EAAA,OAAkEQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,cAAAT,EAAA,OAAiCQ,YAAA,UAAqB,CAAAR,EAAA,OAAYQ,YAAA,qBAAAK,MAAA,CAAyCC,gBAAA,OAAAlB,EAAAe,SAAAM,eAAA,OAAgEjB,EAAA,QAAAJ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAO,iBAAAlB,EAAA,OAAmEQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,aAAAT,EAAA,OAAgCQ,YAAA,UAAqB,CAAAR,EAAA,eAAoBmB,MAAA,CAAOC,GAAAxB,EAAAe,SAAAU,MAAuB,CAAAzB,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAC,aAAA,KAAAZ,EAAA,OAAyDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,gBAAAT,EAAA,OAAmCQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAW,iBAAAtB,EAAA,OAAwDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,cAAAT,EAAA,OAAiCQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAY,eAAAvB,EAAA,OAAsDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,gBAAAT,EAAA,OAAmCQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAa,iBAAAxB,EAAA,OAAwDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,eAAAT,EAAA,OAAkCQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAc,gBAAAzB,EAAA,OAAuDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,eAAAT,EAAA,OAAkCQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAe,gBAAA1B,EAAA,OAAuDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,YAAAT,EAAA,OAA+BQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAgB,QAAA,IAAA/B,EAAAc,GAAAd,EAAAe,SAAAiB,sBAAA5B,EAAA,OAA6FQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,WAAAT,EAAA,OAA8BQ,YAAA,UAAqB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,SAAAkB,eAAAhC,KAAAiC,OAAAC,MAAAC,KAAA,OAAAhC,EAAA,OAAsFQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,qBAAgC,CAAAR,EAAA,UAAeQ,YAAA,iCAAAW,MAAA,CAAoDc,SAAArC,EAAAsC,QAAsB/B,GAAA,CAAKgC,MAAAvC,EAAAwC,OAAkB,CAAAxC,EAAA,OAAAI,EAAA,OAAyBQ,YAAA,gBAA0BZ,EAAAyC,KAAAzC,EAAAa,GAAAb,EAAAc,GAAAd,EAAA0C,uBAAA1C,EAAAyC,KAAAzC,EAAA2C,MAAA,KAAAvC,EAAA,OAAwFQ,YAAA,mBAAAW,MAAA,CAAsCqB,KAAA,UAAgB,CAAA5C,EAAAa,GAAAb,EAAAc,GAAAd,EAAA2C,MAAAE,aAAA7C,EAAAyC,KAAAzC,EAAA2C,MAAA,QAAAvC,EAAA,OAA8EQ,YAAA,sBAAAW,MAAA,CAAyCqB,KAAA,SAAeE,SAAA,CAAWC,UAAA/C,EAAAc,GAAAd,EAAA2C,MAAAK,gBAA2ChD,EAAAyC,KAAAzC,EAAA2C,MAAA,OAAAvC,EAAA,OAAwCQ,YAAA,qBAAAW,MAAA,CAAwCqB,KAAA,UAAgB,CAAA5C,EAAAa,GAAAb,EAAAc,GAAAd,EAAA2C,MAAAM,eAAAjD,EAAAyC,KAAArC,EAAA,MAA2DQ,YAAA,QAAmB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAAd,EAAAkD,MAAAC,QAAA,YAAA/C,EAAA,OAAwDQ,YAAA,YAAuB,CAAAR,EAAA,OAAYQ,YAAA,qBAAgC,CAAAR,EAAA,UAAegD,WAAA,EAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAvD,EAAA,WAAAwD,WAAA,eAA8EjD,GAAA,CAAMkD,OAAA,SAAAC,GAA0B,IAAAC,EAAAC,MAAAC,UAAAC,OAAAC,KAAAL,EAAAM,OAAAC,QAAA,SAAAC,GAAkF,OAAAA,EAAAC,WAAkBC,IAAA,SAAAF,GAAkB,IAAAG,EAAA,WAAAH,IAAAI,OAAAJ,EAAAX,MAA6C,OAAAc,IAAarE,EAAAuE,WAAAb,EAAAM,OAAAQ,SAAAb,IAAA,MAA4E,CAAAvD,EAAA,UAAemB,MAAA,CAAOgC,MAAA,UAAiB,CAAAvD,EAAAa,GAAA,mBAAAT,EAAA,UAAyCmB,MAAA,CAAOgC,MAAA,SAAgB,CAAAvD,EAAAa,GAAA,wBAAAT,EAAA,OAA2CQ,YAAA,aAAwB,CAAAR,EAAA,MAAWQ,YAAA,+BAA0CZ,EAAAyE,GAAAzE,EAAA,eAAAwC,EAAAkC,GAAyC,OAAAtE,EAAA,MAAgBuE,IAAAD,EAAA9D,YAAA,mBAAwC,CAAAR,EAAA,OAAYQ,YAAA,OAAkB,CAAAR,EAAA,OAAYQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAA,IAAAb,EAAAc,GAAA0B,EAAAoC,UAAAxE,EAAA,OAA6CQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAA0B,EAAAP,aAAA7B,EAAA,OAA4CQ,YAAA,SAAoB,CAAAZ,EAAAa,GAAAb,EAAAc,GAAA0B,EAAAqC,4BAA+C,YACtgIC,EAAA,iIC+FAC,EAAA,CACA1B,KAAA,eAEA2B,KAHA,WAIA,OACAjE,SAAA,CAAAU,IAAA,IACAyB,MAAA,GACAqB,WAAA,QACA7B,eAAA,OACAJ,QAAA,IAIA2C,WAAA,CACAC,aAAA,MAGAC,OAAA,CACAC,EAAA,KACAC,EAAA,KACAC,EAAA,MAGAC,QAvBA,WAuBA,IAAAC,EAAAvF,KACAA,KAAAwF,qBAAAC,KAAA,WACAF,EAAAG,iBAIAC,MAAA,CACArB,WAAA,SAAAsB,GAAA5F,KAAA6F,OAAAD,KAGAE,QAAA,CACAJ,YADA,eAAAK,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAxF,EAAAyF,EAAA,OAAAL,mBAAAM,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAEAN,EAAArG,KAAA4G,OAAAC,OAAAR,GAFAI,EAAAE,KAAA,EAGA3G,KAAA8G,oBAAA,mBAAAT,KAHA,UAGAC,EAHAG,EAAAM,KAIAC,QAAAC,IAAAX,GACAA,GAAA,GAAAA,EAAApD,OALA,CAAAuD,EAAAE,KAAA,cAMA3G,KAAAkH,WAAA,oBAAAC,OAAAd,EAAA,qBACA,IAAAe,MAAA,oBAAAD,OAAAd,EAAA,qBAPA,OASAvF,EAAAwF,EAAA,GACAC,EAAA,IAAAc,KAAAvG,EAAAY,UAAA,IAAA2F,KAAAvG,EAAAW,YACAX,EAAAU,IAAA8F,EAAA,KAAAC,SAAA,IAAAzG,EAAAK,QAAA,IAAAL,EAAA0G,SACA1G,EAAAI,MAAA,+BAAAJ,EAAAK,QAAA,gBACAL,EAAAM,eAAA,+BAAAN,EAAAO,SAAA,gBACAP,EAAAkB,SAAAhC,KAAAyH,gBAAA3G,EAAA4G,aACA5G,EAAAyB,MAAA,EACAzB,EAAA6G,SAAA,EACA7G,EAAAa,WAAAiG,EAAA,KAAAC,SAAAtB,GACAzF,EAAAe,WAAAiG,WAAAhH,EAAAc,WAAA2E,EAAA,OAAAwB,QAAA,OAAAT,EAAA,KAAAU,IACAlH,EAAAmH,OAAAjI,KAAAkI,SAAApH,GACAA,EAAAgB,OAAAhB,EAAAmH,OAAA,oBACAnH,EAAAmH,QACAnH,EAAAgB,OAAA,SACAhB,EAAAiB,gBAAA,KAEAjB,EAAAgB,OAAA,WACAhB,EAAAiB,gBAAA,sBAAAoF,OAAAS,EAAA,KAAAC,SAAA,IAAAR,KAAAvG,EAAAW,WAAA,KAAA4F,KAAAc,OAAA,MAEAnI,KAAAc,WACAkG,QAAAC,IAAA,eAAAE,OAAArG,EAAA4G,cAEA1H,KAAAiC,OAAAC,MAAAC,KAAAiG,QAAApI,KAAAqI,uBACArI,KAAAsI,YAhCA,yBAAA7B,EAAA8B,SAAAnC,EAAApG,SAAA,SAAA0F,IAAA,OAAAK,EAAAyC,MAAAxI,KAAAyI,WAAA,OAAA/C,EAAA,GAmCAG,OAnCA,SAmCA6C,GACA,OAAAA,GACA,YAEA,YADA1I,KAAAiD,MAAA0F,KAAA,SAAAC,EAAAC,GAAA,OAAAC,SAAAD,EAAA5F,OAAA6F,SAAAF,EAAA3F,SAEA,WAEA,YADAjD,KAAAiD,MAAA0F,KAAA,SAAAC,EAAAC,GAAA,OAAAD,EAAAjE,MAAAoE,cAAAF,EAAAlE,SAEA,QACA,UAAAyC,MAAA,aAAAD,OAAAuB,EAAA,iCAIAR,SAhDA,SAgDApH,GACA,IAAAqH,EAAAd,KAAAc,MACA,OAAAA,GAAA,IAAAd,KAAAvG,EAAAY,SAAA,MAAAyG,GAAA,IAAAd,KAAAvG,EAAAW,WAAA,MAGA6G,UArDA,eAAAU,EAAAhD,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAA8C,IAAA,IAAAnI,EAAAoI,EAAAC,EAAAC,EAAAnG,EAAAoG,EAAAC,EAAAC,EAAAhH,EAAA,OAAA2D,mBAAAM,KAAA,SAAAgD,GAAA,eAAAA,EAAA9C,KAAA8C,EAAA7C,MAAA,OAsDA7F,EAAAd,KAAAc,SACAA,EAAA4G,YAAA,EACAwB,EAAA,GACAC,GAAA,EACAC,EAAA,GA1DA,UA2DAD,EA3DA,CAAAK,EAAA7C,KAAA,gBAAA6C,EAAA7C,KAAA,EA4DA3G,KAAA8G,oBAAA,wBAAAhG,EAAAuF,GAAA6C,GAAA,0BA5DA,UA4DAjG,EA5DAuG,EAAAzC,KA8DA,GAAA9D,EAAAC,OA9DA,CAAAsG,EAAA7C,KAAA,SA+DAwC,GAAA,EACAlG,EAAA,GAAAnC,SAAAuF,IAAAvF,EAAAuF,IAAA+C,EAAAK,KAAAxG,EAAA,GAAA0B,OAhEA6E,EAAA7C,KAAA,iBAkEA0C,EAAA,EAlEA,aAkEAA,EAAApG,EAAAC,OAAA,GAlEA,CAAAsG,EAAA7C,KAAA,YAmEA1D,EAAAoG,GAAAvI,SAAAuF,KAAAvF,EAAAuF,GAnEA,CAAAmD,EAAA7C,KAAA,gBAoEAwC,GAAA,EApEAK,EAAAE,OAAA,oBAuEAN,EAAAK,KAAAxG,EAAAoG,GAAA1E,OAvEA,QAkEA0E,IAlEAG,EAAA7C,KAAA,iBA0EAuC,EAAAjG,IAAAC,OAAA,GAAAyB,MA1EA6E,EAAA7C,KAAA,uBA4EAK,QAAAC,IAAA,gBAAAE,OAAArG,EAAAuF,KACAW,QAAAC,IAAAmC,GACApJ,KAAAiD,MAAA,GA9EAuG,EAAA7C,KAAA,GA+EA3G,KAAA8G,oBAAA,gBAAAsC,IA/EA,QAgFA,IAAAC,KADAC,EA/EAE,EAAAzC,KAgFAuC,EACAC,EAAAD,EAAAD,GACA9G,EAAAvC,KAAA2J,eAAAJ,GACAvJ,KAAAiD,MAAAwG,KAAAlH,GACAzB,EAAA4G,aAAAnF,EAAAU,MAEA+D,QAAAC,IAAA,eAAAE,OAAArG,EAAA4G,cACA5G,EAAAkB,SAAAhC,KAAAyH,gBAAA3G,EAAA4G,aACA1H,KAAAc,WACAd,KAAA6F,OAAA7F,KAAAsE,YAzFA,yBAAAkF,EAAAjB,SAAAU,EAAAjJ,SAAA,SAAAsI,IAAA,OAAAU,EAAAR,MAAAxI,KAAAyI,WAAA,OAAAH,EAAA,GA4FAsB,oBA5FA,SA4FAL,GACA,WAAAA,EAAAM,MAAA,EACA7J,KAAA8J,qBAAAP,GAAAvJ,KAAA+J,kBAAAR,IAGAO,qBAjGA,SAiGAP,GACA,OAAAS,KAAAC,MAAA,IAAAnC,WAAAyB,EAAAW,kBAGAH,kBArGA,SAqGAR,GACA,IAAAY,EAAA,EACA,QAAAC,KAAAb,EAAAc,kBACAF,GAAArB,SAAAS,EAAAc,kBAAAD,IACA,OAAAD,GAGAR,eA5GA,SA4GAJ,GACA,IAAAhH,EAAA,CACAoC,MAAA4E,EAAAnG,KACAH,MAAAjD,KAAA4J,oBAAAL,GACAe,eAAAtK,KAAA8J,qBAAAP,GACAgB,YAAAvK,KAAA+J,kBAAAR,IAeA,MAbA,KAAAA,EAAAM,OACAtH,EAAAP,SAAAhC,KAAAyH,gBAAAlF,EAAAU,OACAV,EAAAgI,YAAA,EACAhI,EAAAqC,kBAAA,IAAAuC,OAAAnH,KAAAyH,gBAAAlF,EAAA+H,gBAAA,OAAAnD,OAAAnH,KAAAyH,gBAAAlF,EAAAgI,aAAA,WAEAhI,EAAAqC,kBAAA,KAEArC,EAAAP,SAAAhC,KAAAyH,gBAAA,GACAlF,EAAAqC,kBAAA,IAAAuC,OAAAnH,KAAAyH,gBAAAlF,EAAA+H,iBACA/H,EAAAgI,YAAA,IACAhI,EAAAqC,mBAAA,MAAAuC,OAAAnH,KAAAyH,gBAAAlF,EAAAgI,aAAA,YACAhI,EAAAqC,mBAAA,gBAAAuC,OAAAoC,EAAAM,MAAA,MAEAtH,GAGA8F,qBAnIA,eAAAmC,EAAAxE,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAsE,IAAA,IAAAC,EAAArE,EAAAsE,EAAA,OAAAzE,mBAAAM,KAAA,SAAAoE,GAAA,eAAAA,EAAAlE,KAAAkE,EAAAjE,MAAA,cAoIA+D,EAAA1K,KAAAiC,OAAAC,MAAAC,KAAAuI,KACArE,EAAArG,KAAA4G,OAAAC,OAAAR,GACArG,KAAA6K,aAtIAD,EAAAjE,KAAA,EAuIA3G,KAAA8G,oBAAA,wBAAA4D,EAAArE,GAAA,wBAvIA,OAuIAsE,EAvIAC,EAAA7D,KAwIA4D,GAAA,GAAAA,EAAAzH,QAIAlD,KAAAc,SAAAyB,MAAA,EACAvC,KAAAyC,eAAA,gBAJAzC,KAAAc,SAAAyB,MAAA,EACAvC,KAAAyC,eAAA,QA1IA,wBAAAmI,EAAArC,SAAAkC,EAAAzK,SAAA,SAAAqI,IAAA,OAAAmC,EAAAhC,MAAAxI,KAAAyI,WAAA,OAAAJ,EAAA,GAiJA9F,KAjJA,WAkJA,IAAAmI,EAAA1K,KAAAiC,OAAAC,MAAAC,KAAAuI,KACAI,EAAA9K,KAAAiC,OAAAC,MAAAC,KAAA4I,KAAA9C,OACA+C,EAAAhL,KAAAiC,OAAAC,MAAAC,KAAA4I,KAAAE,MACAC,EAAA,KACA7E,EAAArG,KAAA4G,OAAAC,OAAAR,GAEA,SAAAyE,EACAI,EAAAJ,MACA,UAAAE,EAIA,YADAhL,KAAAkH,WAAA,kDAFAgE,EAAAF,EAMA,IAAAG,EAAA,EACA,wBACA,CACAxG,MAAA+F,EACAU,aAAA,CAAA/E,GACAgF,SAAArL,KAAAc,SAAAyB,KACA+I,WAAA,MAIAtL,KAAAqC,QAAA,EACArC,KAAAuL,cACAvL,KAAAwL,aACAxL,KAAAyL,WAEA,IAAAC,EAAA1L,KAEAA,KAAA2L,+BAAAR,EAAAD,GACAzF,KAAA,SAAAmG,GACAF,EAAArJ,QAAA,EACAqJ,EAAAG,YAAA,YAAA1E,OAAAG,EAAA,KAAAwE,UAAA,MAAA3E,OAAAyE,EAAAG,UAAA,KAAA5E,OAAAyE,EAAAvF,GAAA,yDACAqF,EAAArD,yBAEA2D,MAAA,SAAAC,GAKA,MAJAP,EAAArJ,QAAA,EACAqJ,EAAAxE,WAAA+E,EAAAC,SACAlF,QAAAC,IAAA,cACAD,QAAAC,IAAAkE,GACAc,KAIAzL,QAjMA,WAkMAR,KAAAqI,uBACArI,KAAAuL,cACAvL,KAAAwL,aACAxL,KAAAyL,YAGA/K,SAxMA,WAyMAV,KAAAuL,cACAvL,KAAAwL,aACAxL,KAAAyL,cC5UsVU,EAAA,0BCQtVC,EAAgBpG,OAAAqG,EAAA,KAAArG,CACdmG,EACArM,EACA+E,GACF,EACA,KACA,WACA,MAIeyH,EAAA,WAAAF","file":"js/chunk-51e35d80.579944c1.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalPage.vue?vue&type=style&index=0&id=7d5ad6e1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalPage.vue?vue&type=style&index=0&id=7d5ad6e1&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('HeaderEFTG',{ref:\"headerEFTG\",on:{\"login\":_vm.onLogin,\"logout\":_vm.onLogout}}),_c('div',{staticClass:\"container\"},[_c('h2',[_vm._v(_vm._s(_vm.proposal.subject))]),_c('div',{staticClass:\"row mt-3 mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Creator\")]),_c('div',{staticClass:\"col-10\"},[_c('div',{staticClass:\"image-profile mr-2\",style:({ backgroundImage: 'url(' + _vm.proposal.image + ')' })}),_c('span',[_vm._v(_vm._s(_vm.proposal.creator))])])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Receiver\")]),_c('div',{staticClass:\"col-10\"},[_c('div',{staticClass:\"image-profile mr-2\",style:({ backgroundImage: 'url(' + _vm.proposal.image_receiver + ')' })}),_c('span',[_vm._v(_vm._s(_vm.proposal.receiver))])])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Subject\")]),_c('div',{staticClass:\"col-10\"},[_c('router-link',{attrs:{\"to\":_vm.proposal.url}},[_vm._v(_vm._s(_vm.proposal.subject))])],1)]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Start date\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.start_date))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"End date\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.end_date))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Total days\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.total_time))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Daily pay\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.daily_pay))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Total pay\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.total_pay))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Status\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.status)+\" \"+_vm._s(_vm.proposal.status_extended))])]),_c('div',{staticClass:\"row mb-2\"},[_c('div',{staticClass:\"col-2\"},[_vm._v(\"Votes\")]),_c('div',{staticClass:\"col-10\"},[_vm._v(_vm._s(_vm.proposal.votes_sp))])]),(this.$store.state.auth.logged)?_c('div',{staticClass:\"row mt-4\"},[_c('div',{staticClass:\"form-group col-12\"},[_c('button',{staticClass:\"btn btn-primary btn-large mr-2\",attrs:{\"disabled\":_vm.saving},on:{\"click\":_vm.vote}},[(_vm.saving)?_c('div',{staticClass:\"mini loader\"}):_vm._e(),_vm._v(_vm._s(_vm.display_button))])])]):_vm._e(),(_vm.alert.info)?_c('div',{staticClass:\"alert alert-info\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.infoText))]):_vm._e(),(_vm.alert.success)?_c('div',{staticClass:\"alert alert-success\",attrs:{\"role\":\"alert\"},domProps:{\"innerHTML\":_vm._s(_vm.alert.successText)}}):_vm._e(),(_vm.alert.danger)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.dangerText))]):_vm._e(),_c('h3',{staticClass:\"mt-5\"},[_vm._v(_vm._s(_vm.votes.length)+\" Votes\")]),_c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-12 text-right\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sort_order),expression:\"sort_order\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sort_order=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"votes\"}},[_vm._v(\"Sort by votes\")]),_c('option',{attrs:{\"value\":\"name\"}},[_vm._v(\"Sort by name\")])])])]),_c('div',{staticClass:\"card mb-2\"},[_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.votes),function(vote,index){return _c('li',{key:index,staticClass:\"list-group-item\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-3\"},[_vm._v(\"@\"+_vm._s(vote.voter))]),_c('div',{staticClass:\"col-2\"},[_vm._v(_vm._s(vote.votes_sp))]),_c('div',{staticClass:\"col-7\"},[_vm._v(_vm._s(vote.votes_description))])])])}),0)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <HeaderEFTG ref=\"headerEFTG\" v-on:login=\"onLogin\" v-on:logout=\"onLogout\"></HeaderEFTG>\n    <div class=\"container\">\n      <h2>{{proposal.subject}}</h2>\n      <div class=\"row mt-3 mb-2\">\n        <div class=\"col-2\">Creator</div>\n        <div class=\"col-10\">\n          <div class=\"image-profile mr-2\" :style=\"{ backgroundImage: 'url(' + proposal.image + ')' }\"></div>\n          <span>{{proposal.creator}}</span>\n        </div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Receiver</div>\n        <div class=\"col-10\">\n          <div class=\"image-profile mr-2\" :style=\"{ backgroundImage: 'url(' + proposal.image_receiver + ')' }\"></div>\n          <span>{{proposal.receiver}}</span>\n        </div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Subject</div>\n        <div class=\"col-10\">\n          <router-link :to=\"proposal.url\">{{proposal.subject}}</router-link>\n        </div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Start date</div>\n        <div class=\"col-10\">{{proposal.start_date}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">End date</div>\n        <div class=\"col-10\">{{proposal.end_date}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Total days</div>\n        <div class=\"col-10\">{{proposal.total_time}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Daily pay</div>\n        <div class=\"col-10\">{{proposal.daily_pay}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Total pay</div>\n        <div class=\"col-10\">{{proposal.total_pay}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Status</div>\n        <div class=\"col-10\">{{proposal.status}} {{proposal.status_extended}}</div>\n      </div>\n      <div class=\"row mb-2\">\n        <div class=\"col-2\">Votes</div>\n        <div class=\"col-10\">{{proposal.votes_sp}}</div>\n      </div>\n      <div v-if=\"this.$store.state.auth.logged\" class=\"row mt-4\">\n        <div class=\"form-group col-12\">\n          <button @click=\"vote\" class=\"btn btn-primary btn-large mr-2\" :disabled=\"saving\"><div v-if=\"saving\" class=\"mini loader\"></div>{{display_button}}</button>\n        </div>\n      </div>\n      <div v-if=\"alert.info\" class=\"alert alert-info\" role=\"alert\">{{alert.infoText}}</div>\n      <div v-if=\"alert.success\" class=\"alert alert-success\" role=\"alert\" v-html=\"alert.successText\"></div>\n      <div v-if=\"alert.danger\"  class=\"alert alert-danger\" role=\"alert\">{{alert.dangerText}}</div>\n\n      <h3 class=\"mt-5\">{{votes.length}} Votes</h3>\n      <div class=\"row mb-3\">\n        <div class=\"col-12 text-right\">\n          <select v-model=\"sort_order\">\n            <option value=\"votes\">Sort by votes</option>\n            <option value=\"name\">Sort by name</option>\n          </select>\n        </div>\n      </div>\n      <div class=\"card mb-2\">\n        <ul class=\"list-group list-group-flush\">\n          <li v-for=\"(vote,index) in votes\" :key=\"index\" class=\"list-group-item\">\n            <div class=\"row\">\n              <div class=\"col-3\">@{{vote.voter}}</div>\n              <div class=\"col-2\">{{vote.votes_sp}}</div>\n              <div class=\"col-7\">{{vote.votes_description}}</div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeaderEFTG from '@/components/HeaderEFTG'\nimport SteemClient from '@/mixins/SteemClient.js'\nimport Alerts from '@/mixins/Alerts.js'\nimport Utils from '@/js/utils.js'\n\nimport Config from '@/config.js'\nimport ChainProperties from '@/mixins/ChainProperties.js'\n\n\nexport default {\n  name: 'ProposalPage',\n\n  data() {\n    return {\n      proposal: {url:''},\n      votes: [],\n      sort_order: 'votes',\n      display_button: 'Vote',\n      saving: false,\n    }\n  },\n\n  components: {\n    HeaderEFTG\n  },\n\n  mixins: [\n    ChainProperties,\n    SteemClient,\n    Alerts\n  ],\n\n  created() {\n    this.getChainProperties().then( ()=>{\n      this.getProposal()\n    })\n  },\n\n  watch: {\n    sort_order: function(new_order){ this.sortBy(new_order) },\n  },\n\n  methods: {\n    async getProposal(){\n      var id = this.$route.params.id\n      var proposals = await this.steem_database_call('find_proposals',[[id]])\n      console.log(proposals)\n      if(!proposals || proposals.length==0){\n        this.showDanger(`Proposal number #${id} does not exists`)\n        throw new Error(`Proposal number #${id} does not exists`)\n      }\n      var proposal = proposals[0]\n      var delta_t = new Date(proposal.end_date) - new Date(proposal.start_date)\n      proposal.url = Config.EXPLORER + '@' + proposal.creator + '/' + proposal.permlink\n      proposal.image = 'https://steemitimages.com/u/'+proposal.creator+'/avatar/small'\n      proposal.image_receiver = 'https://steemitimages.com/u/'+proposal.receiver+'/avatar/small'\n      proposal.votes_sp = this.witnessVotes2sp(proposal.total_votes)\n      proposal.vote = false\n      proposal.newVote = false\n      proposal.total_time = Utils.textTime(delta_t)\n      proposal.total_pay = (parseFloat(proposal.daily_pay) * delta_t / (1000*60*60*24)).toFixed(3) + ' ' + Config.SBD\n      proposal.active = this.isActive(proposal)\n      proposal.status = proposal.active ? 'active' : 'inactive'\n      if(proposal.active){\n        proposal.status = 'active'\n        proposal.status_extended = ''\n      }else{\n        proposal.status = 'inactive'\n        proposal.status_extended = `(becomes active in ${Utils.textTime(new Date(proposal.start_date+'Z') - Date.now())})`\n      }\n      this.proposal = proposal\n      console.log(`total votes ${proposal.total_votes}`)\n\n      if(this.$store.state.auth.logged) this.loadVotesFromAccount()\n      this.loadVotes()\n    },\n\n    sortBy(type){\n      switch(type){\n        case 'votes':\n          this.votes.sort( (a,b)=>{ return parseInt(b.votes) - parseInt(a.votes) })\n          return\n        case 'name':\n          this.votes.sort( (a,b)=>{ return a.voter.localeCompare(b.voter) })\n          return\n        default:\n          throw new Error(`The type '${type}' for sort does not exists`)\n      }\n    },\n\n    isActive(proposal){\n      var now = Date.now()\n      return now <= new Date(proposal.end_date+'Z') && now >= new Date(proposal.start_date+'Z')\n    },\n\n    async loadVotes(){\n      var proposal = this.proposal\n      proposal.total_votes = 0\n      var from = ''\n      var break_while = false\n      var voters = []\n      while(!break_while){\n        var votes = await this.steem_database_call('list_proposal_votes',[[proposal.id,from],100,'by_proposal_voter'])\n\n        if(votes.length == 1){\n          break_while = true\n          if(votes[0].proposal.id == proposal.id) voters.push(votes[0].voter)\n        }else{\n          for(var j=0; j<votes.length-1; j++){ //don't take the last one. It is for the next round\n            if(votes[j].proposal.id !== proposal.id){\n              break_while = true\n              break\n            }\n            voters.push(votes[j].voter)\n          }\n        }\n        from = votes[votes.length-1].voter\n      }\n      console.log(`voters of id ${proposal.id}`)\n      console.log(voters)\n      this.votes = []\n      var accounts = await this.steem_database_call('get_accounts',[voters])\n      for(var j in accounts){\n        var account = accounts[j]\n        var vote = this.calculate_vote(account)\n        this.votes.push(vote)\n        proposal.total_votes += vote.votes\n      }\n      console.log(`total votes ${proposal.total_votes}`)\n      proposal.votes_sp = this.witnessVotes2sp(proposal.total_votes)\n      this.proposal = proposal\n      this.sortBy(this.sort_order)\n    },\n\n    witness_vote_weight(account) {\n      if(account.proxy !== '') return 0\n      return this.no_proxy_vote_weight(account) + this.proxy_vote_weight(account)\n    },\n\n    no_proxy_vote_weight(account){\n      return Math.floor(parseFloat(account.vesting_shares)*1e6)\n    },\n\n    proxy_vote_weight(account) {\n      var total = 0\n      for(var i in account.proxied_vsf_votes)\n        total += parseInt(account.proxied_vsf_votes[i])\n      return total\n    },\n\n    calculate_vote(account) {\n      var vote = {\n        voter: account.name,\n        votes: this.witness_vote_weight(account),\n        no_proxy_votes: this.no_proxy_vote_weight(account),\n        proxy_votes: this.proxy_vote_weight(account),\n      }\n      if(account.proxy === ''){ //no proxy set\n        vote.votes_sp = this.witnessVotes2sp(vote.votes)\n        if(vote.proxy_votes>0)\n          vote.votes_description = `(${this.witnessVotes2sp(vote.no_proxy_votes)} + ${this.witnessVotes2sp(vote.proxy_votes)} proxy)`\n        else\n          vote.votes_description = ''\n      }else{\n        vote.votes_sp = this.witnessVotes2sp(0)\n        vote.votes_description = `(${this.witnessVotes2sp(vote.no_proxy_votes)}`\n        if(vote.proxy_votes>0)\n          vote.votes_description += ` + ${this.witnessVotes2sp(vote.proxy_votes)} proxy,`\n        vote.votes_description += ` proxied to @${account.proxy})`\n      }\n      return vote\n    },\n\n    async loadVotesFromAccount(){\n      var user = this.$store.state.auth.user\n      var id = this.$route.params.id\n      this.clearVotes()\n      var account_votes = await this.steem_database_call('list_proposal_votes',[[user,id],1,'by_voter_proposal'])\n      if(!account_votes || account_votes.length==0){\n        this.proposal.vote = false\n        this.display_button = 'Vote'\n      }else{\n        this.proposal.vote = true\n        this.display_button = 'Remove vote'\n      }\n    },\n\n    vote(){\n      var user = this.$store.state.auth.user\n      var activeKey = this.$store.state.auth.keys.active\n      var ownerKey  = this.$store.state.auth.keys.owner\n      var privKey = null\n      var id = this.$route.params.id\n\n      if( activeKey != null ) {\n        privKey = activeKey\n      }else if(ownerKey != null ) {\n        privKey = ownerKey\n      }else {\n        this.showDanger('Please login with master, owner, or active key')\n        return\n      }\n\n      var ops = [[\n        'update_proposal_votes',\n        {\n          voter: user,\n          proposal_ids: [id],\n          approve: !this.proposal.vote,\n          extensions: []\n        }\n      ]]\n\n      this.saving = true\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n\n      let self = this\n\n      this.steem_broadcast_sendOperations(ops,privKey)\n      .then(function(result){\n        self.saving = false\n        self.showSuccess(`<a href=\"${Config.EXPLORER2}b/${result.block_num}/${result.id}\" class=\"alert-link\" target=\"_blank\">Vote saved!</a>`)\n        self.loadVotesFromAccount()\n      })\n      .catch(function(error){\n        self.saving = false\n        self.showDanger(error.message)\n        console.log('operations')\n        console.log(ops)\n        throw error\n      })\n    },\n\n    onLogin() {\n      this.loadVotesFromAccount()\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n    },\n\n    onLogout() {\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n.hash {\n  font-family: monospace;\n  //font-size: 1.3rem;\n  overflow-wrap: break-word;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProposalPage.vue?vue&type=template&id=7d5ad6e1&scoped=true&\"\nimport script from \"./ProposalPage.vue?vue&type=script&lang=js&\"\nexport * from \"./ProposalPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProposalPage.vue?vue&type=style&index=0&id=7d5ad6e1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d5ad6e1\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}