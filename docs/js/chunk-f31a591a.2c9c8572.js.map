{"version":3,"sources":["webpack:///./src/views/ProposalsPage.vue?b7aa","webpack:///./src/views/ProposalsPage.vue?d18d","webpack:///src/views/ProposalsPage.vue","webpack:///./src/views/ProposalsPage.vue?7494","webpack:///./src/views/ProposalsPage.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ProposalsPage_vue_vue_type_style_index_0_id_4ff71c15_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ProposalsPage_vue_vue_type_style_index_0_id_4ff71c15_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","ref","on","login","onLogin","logout","onLogout","staticClass","_v","steemdao","_s","sbd_balance","_e","daily_budget","hourly_budget","directives","name","rawName","value","expression","change","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","sort_order","multiple","attrs","_l","p","index","key","click","selectProposal","style","backgroundImage","image","creator","receiver","to","url","subject","id","class","badge-primary","active","badge-warning","status","start_date","end_date","total_time","daily_pay","votes_sp","btn-primary","newVote","btn-secondary","stopPropagation","toggleVote","icon","$store","state","auth","disabled","saving","save","reset","alert","role","infoText","domProps","innerHTML","successText","dangerText","staticRenderFns","ProposalsPagevue_type_script_lang_js_","data","proposals","components","HeaderEFTG","mixins","ChainProperties","SteemClient","Alerts","created","_this","getChainProperties","then","getProposals","watch","new_order","sortBy","methods","getSteemDao","_getSteemDao","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","accounts","wrap","_context","prev","next","steem_database_call","sent","parseFloat","toFixed","config","SBD","t0","showDanger","stop","apply","arguments","_getProposals","_callee2","i","delta_t","_context2","console","log","Date","EXPLORER","permlink","witnessVotes2sp","total_votes","vote","utils","textTime","total_pay","isActive","push","logged","loadVotesFromAccount","loadVotesNoActive","type","_this2","sort","a","b","parseInt","localeCompare","activeA","activeB","Error","concat","proposal","now","_loadVotesNoActive","_callee3","from","break_while","voters","votes","j","_context3","keys","t1","done","abrupt","length","voter","witness_vote_weight","$set","account","total","Math","floor","vesting_shares","proxied_vsf_votes","_loadVotesFromAccount","_callee4","user","account_votes","proposalsNotTop","_context4","clearVotes","findIndex","router","params","activeKey","ownerKey","owner","privKey","slice","approve_id_proposals","unapprove_id_proposals","ops","STEEM_PROPOSAL_MAX_IDS_NUMBER","proposal_ids","approve","extensions","hideSuccess","hideDanger","hideInfo","self","steem_broadcast_sendOperations","result","showSuccess","EXPLORER2","block_num","catch","error","message","JSON","parse","stringify","views_ProposalsPagevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-f31a591a.2c9c8572.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=style&index=0&id=4ff71c15&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=style&index=0&id=4ff71c15&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('HeaderEFTG',{ref:\"headerEFTG\",on:{\"login\":_vm.onLogin,\"logout\":_vm.onLogout}}),_c('div',{staticClass:\"container\"},[_c('h2',[_vm._v(\"Proposals\")]),(_vm.steemdao.name)?_c('div',[_vm._v(\"Total fund: \"+_vm._s(_vm.steemdao.sbd_balance))]):_vm._e(),(_vm.steemdao.name)?_c('div',[_vm._v(\"Daily budget: \"+_vm._s(_vm.steemdao.daily_budget))]):_vm._e(),(_vm.steemdao.name)?_c('div',[_vm._v(\"Budget for the next hour: \"+_vm._s(_vm.steemdao.hourly_budget))]):_vm._e(),_c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-12 text-right\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sort_order),expression:\"sort_order\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sort_order=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"votes\"}},[_vm._v(\"Sort by votes\")]),_c('option',{attrs:{\"value\":\"start_date\"}},[_vm._v(\"Sort by start date\")]),_c('option',{attrs:{\"value\":\"end_date\"}},[_vm._v(\"Sort by end date\")]),_c('option',{attrs:{\"value\":\"total_days\"}},[_vm._v(\"Sort by total days\")]),_c('option',{attrs:{\"value\":\"id\"}},[_vm._v(\"Sort by id\")]),_c('option',{attrs:{\"value\":\"status\"}},[_vm._v(\"Sort by status\")]),_c('option',{attrs:{\"value\":\"creator\"}},[_vm._v(\"Sort by creator\")]),_c('option',{attrs:{\"value\":\"receiver\"}},[_vm._v(\"Sort by receiver\")]),_c('option',{attrs:{\"value\":\"daily_pay\"}},[_vm._v(\"Sort by daily pay\")]),_c('option',{attrs:{\"value\":\"total_pay\"}},[_vm._v(\"Sort by total pay\")])])])]),_c('div',{staticClass:\"card mb-2\"},[_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.proposals),function(p,index){return _c('li',{key:index,staticClass:\"list-group-item\",on:{\"click\":function($event){return _vm.selectProposal(index)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-3\"},[_c('div',{staticClass:\"image-profile mr-2\",style:({ backgroundImage: 'url(' + p.image + ')' })}),_c('span',[_vm._v(_vm._s(p.creator)+\" \"),(p.creator !== p.receiver)?_c('span',[_vm._v(\"(receiver @\"+_vm._s(p.receiver)+\")\")]):_vm._e()]),_c('div',[_c('router-link',{attrs:{\"to\":p.url}},[_vm._v(_vm._s(p.subject))])],1),_c('div',[_c('small',[_vm._v(\"id #\"+_vm._s(p.id))]),_c('span',{staticClass:\"badge ml-2\",class:{'badge-primary':p.active,'badge-warning':!p.active}},[_vm._v(_vm._s(p.status))])])]),_c('div',{staticClass:\"col-4\"},[_vm._v(\"From \"+_vm._s(p.start_date)+\" to \"+_vm._s(p.end_date)+\" (\"+_vm._s(p.total_time)+\")\")]),_c('div',{staticClass:\"col-2\"},[_vm._v(_vm._s(p.daily_pay)+\" daily\")]),_c('div',{staticClass:\"col-2\"},[_vm._v(_vm._s(p.votes_sp))]),_c('div',{staticClass:\"col-1\"},[_c('button',{staticClass:\"btn\",class:{'btn-primary':p.newVote, 'btn-secondary':!p.newVote},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleVote(index)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"check\"}})],1)])])])}),0)]),(this.$store.state.auth.logged)?_c('div',{staticClass:\"row mt-4\"},[_c('div',{staticClass:\"form-group col-12\"},[_c('button',{staticClass:\"btn btn-primary btn-large mr-2\",attrs:{\"disabled\":_vm.saving},on:{\"click\":_vm.save}},[(_vm.saving)?_c('div',{staticClass:\"mini loader\"}):_vm._e(),_vm._v(\"Save\")]),_c('button',{staticClass:\"btn btn-secondary btn-large\",on:{\"click\":_vm.reset}},[_vm._v(\"Reset\")])])]):_vm._e(),(_vm.alert.info)?_c('div',{staticClass:\"alert alert-info\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.infoText))]):_vm._e(),(_vm.alert.success)?_c('div',{staticClass:\"alert alert-success\",attrs:{\"role\":\"alert\"},domProps:{\"innerHTML\":_vm._s(_vm.alert.successText)}}):_vm._e(),(_vm.alert.danger)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(_vm._s(_vm.alert.dangerText))]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <HeaderEFTG ref=\"headerEFTG\" v-on:login=\"onLogin\" v-on:logout=\"onLogout\"></HeaderEFTG>\n    <div class=\"container\">\n      <h2>Proposals</h2>\n      <div v-if=\"steemdao.name\">Total fund: {{steemdao.sbd_balance}}</div>\n      <div v-if=\"steemdao.name\">Daily budget: {{steemdao.daily_budget}}</div>\n      <div v-if=\"steemdao.name\">Budget for the next hour: {{steemdao.hourly_budget}}</div>\n      <div class=\"row mb-3\">\n        <div class=\"col-12 text-right\">\n          <select v-model=\"sort_order\">\n            <option value=\"votes\">Sort by votes</option>\n            <option value=\"start_date\">Sort by start date</option>\n            <option value=\"end_date\">Sort by end date</option>\n            <option value=\"total_days\">Sort by total days</option>\n            <option value=\"id\">Sort by id</option>\n            <option value=\"status\">Sort by status</option>\n            <option value=\"creator\">Sort by creator</option>\n            <option value=\"receiver\">Sort by receiver</option>\n            <option value=\"daily_pay\">Sort by daily pay</option>\n            <option value=\"total_pay\">Sort by total pay</option>\n          </select>\n        </div>\n      </div>\n      <div class=\"card mb-2\">\n        <ul class=\"list-group list-group-flush\">\n          <li v-for=\"(p,index) in proposals\" :key=\"index\" class=\"list-group-item\" @click=\"selectProposal(index)\">\n            <div class=\"row\">\n              <div class=\"col-3\">\n                <div class=\"image-profile mr-2\" :style=\"{ backgroundImage: 'url(' + p.image + ')' }\"></div>\n                <span>{{p.creator}} <span v-if=\"p.creator !== p.receiver\">(receiver @{{p.receiver}})</span></span>\n                <div><router-link :to=\"p.url\">{{p.subject}}</router-link></div>\n                <div><small>id #{{p.id}}</small><span class=\"badge ml-2\" :class=\"{'badge-primary':p.active,'badge-warning':!p.active}\">{{p.status}}</span> </div>\n              </div>\n              <div class=\"col-4\">From {{p.start_date}} to {{p.end_date}} ({{p.total_time}})</div>\n              <div class=\"col-2\">{{p.daily_pay}} daily</div>\n              <div class=\"col-2\">{{p.votes_sp}}</div>\n              <div class=\"col-1\">\n                <button class=\"btn\" v-on:click.stop=\"toggleVote(index)\" :class=\"{'btn-primary':p.newVote, 'btn-secondary':!p.newVote}\">\n                  <font-awesome-icon icon=\"check\"/>\n                </button>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div v-if=\"this.$store.state.auth.logged\" class=\"row mt-4\">\n        <div class=\"form-group col-12\">\n          <button @click=\"save\" class=\"btn btn-primary btn-large mr-2\" :disabled=\"saving\"><div v-if=\"saving\" class=\"mini loader\"></div>Save</button>\n          <button @click=\"reset\" class=\"btn btn-secondary btn-large\">Reset</button>\n        </div>            \n      </div>\n      <div v-if=\"alert.info\" class=\"alert alert-info\" role=\"alert\">{{alert.infoText}}</div>\n      <div v-if=\"alert.success\" class=\"alert alert-success\" role=\"alert\" v-html=\"alert.successText\"></div>\n      <div v-if=\"alert.danger\"  class=\"alert alert-danger\" role=\"alert\">{{alert.dangerText}}</div>\n    </div>    \n  </div>\n</template>\n\n<script>\nimport HeaderEFTG from '@/components/HeaderEFTG'\nimport SteemClient from '@/mixins/SteemClient.js'\nimport Alerts from '@/mixins/Alerts.js'\nimport Utils from '@/js/utils.js'\nimport router from '@/router.js'\n\nimport Config from '@/config.js'\nimport ChainProperties from '@/mixins/ChainProperties.js'\n\n\nexport default {\n  name: 'ProposalsPage',\n  \n  data() {\n    return {\n      proposals: [],\n      sort_order: 'votes',\n      steemdao: {},\n      saving: false\n    }\n  },\n\n  components: {\n    HeaderEFTG\n  },\n\n  mixins: [\n    ChainProperties,\n    SteemClient,\n    Alerts\n  ],\n\n  created() {\n    this.getChainProperties().then( ()=>{\n      this.getProposals()\n    })\n  },\n\n  watch: {\n    sort_order: function(new_order){ this.sortBy(new_order) },\n  },\n\n  methods: {\n    async getSteemDao(){\n      try{\n        var accounts = await this.steem_database_call('get_accounts',[['steem.dao']])\n        this.steemdao = accounts[0]\n        this.steemdao.daily_budget = (parseFloat(this.steemdao.sbd_balance)/100).toFixed(3) + ' ' + Config.SBD\n        this.steemdao.hourly_budget = (parseFloat(this.steemdao.sbd_balance)/(24*100)).toFixed(3) + ' ' + Config.SBD\n      }catch(error){\n        this.showDanger('Problems loading steem.dao')\n        throw error\n      }\n    },\n\n    async getProposals(){\n      console.log('get')\n      this.proposals = []\n      await this.getSteemDao()\n      var proposals = await this.steem_database_call('list_proposals',[['',0],100,'by_creator'])\n      for(var i in proposals){\n        var p = proposals[i]\n        var delta_t = new Date(p.end_date) - new Date(p.start_date)\n        p.url = Config.EXPLORER + '@' + p.creator + '/' + p.permlink\n        p.image = 'https://steemitimages.com/u/'+p.creator+'/avatar/small'\n        p.votes_sp = this.witnessVotes2sp(p.total_votes)\n        p.vote = false\n        p.newVote = false\n        p.total_time = Utils.textTime(delta_t)\n        p.total_pay = (parseFloat(p.daily_pay) * delta_t / (1000*60*60*24)).toFixed(3) + ' ' + Config.SBD\n        p.active = this.isActive(p)\n        p.status = p.active ? 'active' : 'inactive'\n        this.proposals.push(p)\n      }\n      this.sortBy(this.sort_order)\n      if(this.$store.state.auth.logged) this.loadVotesFromAccount()\n      this.loadVotesNoActive()\n    },\n\n    sortBy(type){\n      switch(type){\n        case 'votes':\n          this.proposals.sort( (a,b)=>{ return parseInt(b.total_votes) - parseInt(a.total_votes) })\n          return\n        case 'start_date':\n          this.proposals.sort( (a,b)=>{ return new Date(a.start_date) - new Date(b.start_date) })\n          return\n        case 'end_date':\n          this.proposals.sort( (a,b)=>{ return new Date(a.end_date) - new Date(b.end_date) })\n          return\n        case 'total_days':\n          this.proposals.sort( (a,b)=>{ return (new Date(b.end_date) - new Date(b.start_date))\n                                              -(new Date(a.end_date) - new Date(a.start_date)) })\n          return\n        case 'creator':\n          this.proposals.sort( (a,b)=>{ return a.creator.localeCompare(b.creator) })\n          return\n        case 'receiver':\n          this.proposals.sort( (a,b)=>{ return a.receiver.localeCompare(b.receiver) })\n          return\n        case 'daily_pay':\n          this.proposals.sort( (a,b)=>{ return parseFloat(b.daily_pay) - parseFloat(a.daily_pay) })\n          return\n        case 'total_pay':\n          this.proposals.sort( (a,b)=>{ return (new Date(b.end_date) - new Date(b.start_date)) * parseFloat(b.daily_pay)\n                                              -(new Date(a.end_date) - new Date(a.start_date)) * parseFloat(a.daily_pay) })\n          return\n        case 'status':\n          this.proposals.sort( (a,b)=>{\n            var activeA = this.isActive(a)\n            var activeB = this.isActive(b)\n            if( activeA == activeB ) return parseInt(b.total_votes) - parseInt(a.total_votes) //sort by votes\n            if( activeA && !activeB ) return -1\n            if( !activeA && activeB ) return 1\n          })\n          return\n        case 'id':\n          this.proposals.sort( (a,b)=>{ return parseInt(a.id) - parseInt(b.id) })\n          return\n        default:\n          throw new Error(`The type '${type}' for sort does not exists`)\n      }\n    },\n\n    isActive(proposal){\n      var now = Date.now()\n      return now <= new Date(proposal.end_date+'Z') && now >= new Date(proposal.start_date+'Z')\n    },\n\n    /**\n     * ISSUE: https://github.com/steemit/steem/issues/3488\n     * This call is not necessary after this issue is solved\n     */ \n    async loadVotesNoActive(){\n      for(var i in this.proposals){\n        var proposal = this.proposals[i]\n        if(this.isActive(proposal)) continue\n        proposal.total_votes = 0\n        var from = ''\n        var break_while = false\n        var voters = []\n        while(!break_while){\n          var votes = await this.steem_database_call('list_proposal_votes',[[proposal.id,from],100,'by_proposal_voter'])\n          if(votes.length == 0) break\n          console.log(`Votes: length: ${votes.length}. from '${votes[0].voter}' to '${votes[votes.length-1].voter}'`)\n\n          if(votes.length == 1){\n            break_while = true\n            if(votes[0].proposal.id == proposal.id) voters.push(votes[0].voter)\n          }else{\n            for(var j=0; j<votes.length-1; j++){ //don't take the last one. It is for the next round\n              if(votes[j].proposal.id !== proposal.id){\n                break_while = true\n                break\n              }\n              voters.push(votes[j].voter) \n            }\n          }\n          from = votes[votes.length-1].voter\n        }\n        console.log(`voters of id ${proposal.id}`)\n        console.log(voters)\n        var accounts = await this.steem_database_call('get_accounts',[voters])\n        for(var j in accounts){\n          proposal.total_votes += parseInt(this.witness_vote_weight(accounts[j]))\n        }\n        console.log(`total votes ${proposal.total_votes}`)\n        proposal.votes_sp = this.witnessVotes2sp(proposal.total_votes)\n        this.$set(this.proposals, i, proposal)\n      }\n      this.sortBy(this.sort_order)\n    },\n\n    witness_vote_weight(account) {\n      var total = Math.floor(parseFloat(account.vesting_shares)*1e6)\n      for(var i in account.proxied_vsf_votes)\n        total += parseInt(account.proxied_vsf_votes[i])\n      return total\n    },\n\n    async loadVotesFromAccount(){\n      var user = this.$store.state.auth.user\n      this.clearVotes()\n      var account_votes = await this.steem_database_call('list_proposal_votes',[[user,0],100,'by_voter_proposal'])\n      var proposalsNotTop = []\n      for(var i in account_votes){\n        var vote = account_votes[i]\n        if(vote.voter !== user) break\n        var index = this.proposals.findIndex( (p)=>{ return p.id === vote.proposal.id })\n        if(index >= 0){\n          var proposal = this.proposals[index]\n          proposal.vote = true\n          proposal.newVote = true\n          this.$set(this.proposals, index, proposal)\n        }else{\n          proposalsNotTop.push(vote)\n        }\n      }\n      if(proposalsNotTop.length > 0) {\n        console.log('TODO: these proposals are already voted but they are not in the TOP list:')\n        console.log(proposalsNotTop)\n      }\n    },\n\n    selectProposal(index){\n      var proposal = this.proposals[index]\n      router.push({ name: 'Proposal', params:{id:proposal.id} })\n    },\n\n    toggleVote(index){\n      var p = this.proposals[index]\n      p.newVote = !p.newVote\n      this.$set(this.proposals, index, p)\n    },\n\n    save(){\n      var user = this.$store.state.auth.user\n      var activeKey = this.$store.state.auth.keys.active\n      var ownerKey  = this.$store.state.auth.keys.owner\n      var privKey = null\n\n      if( activeKey != null ) {\n        privKey = activeKey\n      }else if(ownerKey != null ) {\n        privKey = ownerKey \n      }else {\n        this.showDanger('Please login with master, owner, or active key')\n        return \n      }\n\n      var proposals = this.proposals.slice()\n\n      var approve_id_proposals = []\n      var unapprove_id_proposals = []\n      for(var i in proposals) {\n        var p = proposals[i]\n\n        if(p.newVote != p.vote) {\n          if(p.newVote === true) approve_id_proposals.push(p.id)\n          else unapprove_id_proposals.push(p.id)\n        }\n      }\n\n      if(approve_id_proposals.length == 0 && unapprove_id_proposals.length == 0) {\n        this.showDanger('Nothing to change')\n        return\n      }\n\n      var ops = []\n      approve_id_proposals.sort( (a,b)=>{return a-b})\n      unapprove_id_proposals.sort( (a,b)=>{return a-b})\n\n      var j=0\n      for(var i=0; i<approve_id_proposals.length; i++){\n        if(j%Config.STEEM_PROPOSAL_MAX_IDS_NUMBER == 0){\n          ops.push([\n            'update_proposal_votes',\n            {\n              voter: user,\n              proposal_ids: [],\n              approve: true,\n              extensions: []\n            }\n          ])\n        }\n        ops[ops.length-1][1].proposal_ids.push( approve_id_proposals[i] )\n        j++\n      }\n\n      var j=0\n      for(var i=0; i<unapprove_id_proposals.length; i++){\n        if(j%Config.STEEM_PROPOSAL_MAX_IDS_NUMBER == 0){\n          ops.push([\n            'update_proposal_votes',\n            {\n              voter: user,\n              proposal_ids: [],\n              approve: false,\n              extensions: []\n            }\n          ])\n        }\n        ops[ops.length-1][1].proposal_ids.push( unapprove_id_proposals[i] )\n        j++\n      }\n\n      this.saving = true\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n\n      let self = this\n\n      this.steem_broadcast_sendOperations(ops,privKey)\n      .then(function(result){\n        self.saving = false\n        self.showSuccess(`<a href=\"${Config.EXPLORER2}b/${result.block_num}/${result.id}\" class=\"alert-link\" target=\"_blank\">Votes saved!</a>`)\n        self.loadVotesFromAccount()\n      })\n      .catch(function(error){\n        self.saving = false\n        self.showDanger(error.message)\n        console.log('operations')\n        console.log(ops)\n        throw error\n      })\n    },\n\n    reset(){\n      for(var i in this.proposals) {\n        var p = this.proposals[i]\n        p.newVote = JSON.parse(JSON.stringify(p.vote))\n        this.$set(this.proposals, i, p)\n      }\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n    },\n\n    clearVotes() {\n      for(var i in this.proposals) {\n        var p = this.proposals[i]\n        p.vote = false\n        this.$set(this.proposals, i, p)\n      }      \n    },\n\n    onLogin() {\n      this.loadVotesFromAccount()\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo() \n    },\n    \n    onLogout() {\n      this.clearVotes()\n      this.hideSuccess()\n      this.hideDanger()\n      this.hideInfo()\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n.hash {\n  font-family: monospace;\n  //font-size: 1.3rem;\n  overflow-wrap: break-word;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProposalsPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProposalsPage.vue?vue&type=template&id=4ff71c15&scoped=true&\"\nimport script from \"./ProposalsPage.vue?vue&type=script&lang=js&\"\nexport * from \"./ProposalsPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProposalsPage.vue?vue&type=style&index=0&id=4ff71c15&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ff71c15\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}